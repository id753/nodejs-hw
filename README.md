# Express-додаток для роботи з колекцією нотаток
## Реалізовано скидання паролю через пошту, а також завантаження зображення для аватара користувача.

Скидання паролю через email. Підключено до SMTP-сервера Brevo за допомогою пакету nodemailer https://www.npmjs.com/package/nodemailer?utm_source=chatgpt.com.</br>
Створено роут POST /auth/request-reset-email, який буде надсилати email для скидання паролю. 
Зроблено HTML-лист на основі шаблону src/templates/reset-password-email.html (використано handlebars https://www.npmjs.com/package/handlebars?utm_source=chatgpt.com для підстановки даних, таких як ім’я користувача та посилання).</br>
Використано утиліту sendEmail для надсилання листа з посиланням для скиду паролю. В цій утиліті за допомогою пакету nodemailer організовано відправку емейла користувачу.</br>

Скидання паролю. Створено роут POST /auth/reset-password, який буде скидати пароль.</br>

Аватар користувача. Розширено функціонал вашого серверу, додавши можливість завантажувати зображення для аватарки користувача.</br>
Налаштування Cloudinary.</br>

Завантаження аватара. Створено роут PATCH /users/me/avatar, який буде оновлювати аватар користувача
Реалізація утиліти для збереження файлу в хмарне сховище.</br>
Використано бібліотеку cloudinary https://www.npmjs.com/package/cloudinary?utm_source=chatgpt.com;</br>
Реалізовано функцію saveFileToCloudinary(buffer), яка приймає буфер файлу та повертає проміс, який резолвить об’єкт із даними завантаженого зображення.</br>


Фільтрація. Використовуючи текстовий індекс MongoDB додано можливість фільтрування колекції нотаток до маршруту GET /notes за тегом та текстом через параметри рядка запиту (search, tag).</br>
Пагінація. Додано можливість пагінації до маршруту GET /notes через параметри рядка запиту (page, perPage).</br>
Валідація. Додано валідацію вхідних даних за допомогою бібліотеки celebrate https://www.npmjs.com/package/celebrate.</br>

Добре реалізовані аспекти:

    Коректне використання ES-модулів та імпортів.
    Змінні середовища завантажуються за допомогою 'dotenv/config'.
    CORS увімкнено для всіх маршрутів.
    Створено свій кластер в mongodb та функцію connectMongoDB для встановлення зʼєднання з нею в окремому файлі.
    При створенні кластеру в MongoDB Atlas налаштовано доступ до мережі, щоб дозволити підключення з будь-якої IP-адреси. 
    Для роботи з mongodb використано пакет mongoose (https://www.npmjs.com/package/mongoose)
    Сервер коректно підключається до MongoDB
    Middleware - додаток має використовувати стандартні middleware та бути грамотно організованим на рівні головного файлу src/server.js.
    - logger.js — логування HTTP-запитів за допомогою pino-http,
    - notFoundHandler.js — обробка всіх запитів на неіснуючі маршрути.
    - errorHandler.js — глобальна обробка помилок: повертає статус 500, або інші статуси у разі використання бібліотеки http-errors.
    Модель Noteю Створено файл note.js із Mongoose-схемою. 
    Схеми коректно використовують celebrate та Joi для валідації.
    Порт та адреса бази зберігаються у .env через змінні PORT та MONGO_URL
    Повідомлення про запуск сервера показує порт.
    Флоу скидання паролю коректно використовує jwt для короткочасних токенів відновлення і handlebars + шаблонний файл для генерування листа для відновлення.
    resetPassword правильно перевіряє токен, оновлює пароль користувача з хешуванням та повертає відповідь про успіх.
    Обмежує завантаження файлами, MIME-тип яких починається з image/.
    Встановлює максимальний ліміт розміру файла.
    Експортує налаштований middleware Multer як upload.
    Функцію saveFileToCloudinary правильно експортовано як асинхронну функцію.
    Завантаження зображення виконується напряму з буфера за допомогою readable stream, без запису на диск.
    Задеплоєно проєкт на render.com
